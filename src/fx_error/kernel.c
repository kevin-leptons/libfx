#include <fx_error/kernel.h>

#include <signal.h>

#define KERNEL_ERR_DEF_(error_name) FX_ERROR_DEF(FX_##error_name)

KERNEL_ERR_DEF_(EPERM)
KERNEL_ERR_DEF_(ENOENT)
KERNEL_ERR_DEF_(ESRCH)
KERNEL_ERR_DEF_(EINTR)
KERNEL_ERR_DEF_(EIO)
KERNEL_ERR_DEF_(ENXIO)
KERNEL_ERR_DEF_(E2BIG)
KERNEL_ERR_DEF_(ENOEXEC)
KERNEL_ERR_DEF_(EBADF)
KERNEL_ERR_DEF_(ECHILD)
KERNEL_ERR_DEF_(EAGAIN)
KERNEL_ERR_DEF_(ENOMEM)
KERNEL_ERR_DEF_(EACCES)
KERNEL_ERR_DEF_(EFAULT)
KERNEL_ERR_DEF_(ENOTBLK)
KERNEL_ERR_DEF_(EBUSY)
KERNEL_ERR_DEF_(EEXIST)
KERNEL_ERR_DEF_(EXDEV)
KERNEL_ERR_DEF_(ENODEV)
KERNEL_ERR_DEF_(ENOTDIR)
KERNEL_ERR_DEF_(EISDIR)
KERNEL_ERR_DEF_(EINVAL)
KERNEL_ERR_DEF_(ENFILE)
KERNEL_ERR_DEF_(EMFILE)
KERNEL_ERR_DEF_(ENOTTY)
KERNEL_ERR_DEF_(ETXTBSY)
KERNEL_ERR_DEF_(EFBIG)
KERNEL_ERR_DEF_(ENOSPC)
KERNEL_ERR_DEF_(ESPIPE)
KERNEL_ERR_DEF_(EROFS)
KERNEL_ERR_DEF_(EMLINK)
KERNEL_ERR_DEF_(EPIPE)
KERNEL_ERR_DEF_(EDOM)
KERNEL_ERR_DEF_(ERANGE)
KERNEL_ERR_DEF_(EDEADLK)
KERNEL_ERR_DEF_(ENAMETOOLONG)
KERNEL_ERR_DEF_(ENOLCK)
KERNEL_ERR_DEF_(ENOSYS)
KERNEL_ERR_DEF_(ENOTEMPTY)
KERNEL_ERR_DEF_(ELOOP)
KERNEL_ERR_DEF_(EWOULDBLOCK)
KERNEL_ERR_DEF_(ENOMSG)
KERNEL_ERR_DEF_(EIDRM)
KERNEL_ERR_DEF_(ECHRNG)
KERNEL_ERR_DEF_(EL2NSYNC)
KERNEL_ERR_DEF_(EL3HLT)
KERNEL_ERR_DEF_(EL3RST)
KERNEL_ERR_DEF_(ELNRNG)
KERNEL_ERR_DEF_(EUNATCH)
KERNEL_ERR_DEF_(ENOCSI)
KERNEL_ERR_DEF_(EL2HLT)
KERNEL_ERR_DEF_(EBADE)
KERNEL_ERR_DEF_(EBADR)
KERNEL_ERR_DEF_(EXFULL)
KERNEL_ERR_DEF_(ENOANO)
KERNEL_ERR_DEF_(EBADRQC)
KERNEL_ERR_DEF_(EBADSLT)
KERNEL_ERR_DEF_(EDEADLOCK)
KERNEL_ERR_DEF_(EBFONT)
KERNEL_ERR_DEF_(ENOSTR)
KERNEL_ERR_DEF_(ENODATA)
KERNEL_ERR_DEF_(ETIME)
KERNEL_ERR_DEF_(ENOSR)
KERNEL_ERR_DEF_(ENONET)
KERNEL_ERR_DEF_(ENOPKG)
KERNEL_ERR_DEF_(EREMOTE)
KERNEL_ERR_DEF_(ENOLINK)
KERNEL_ERR_DEF_(EADV)
KERNEL_ERR_DEF_(ESRMNT)
KERNEL_ERR_DEF_(ECOMM)
KERNEL_ERR_DEF_(EPROTO)
KERNEL_ERR_DEF_(EMULTIHOP)
KERNEL_ERR_DEF_(EDOTDOT)
KERNEL_ERR_DEF_(EBADMSG)
KERNEL_ERR_DEF_(EOVERFLOW)
KERNEL_ERR_DEF_(ENOTUNIQ)
KERNEL_ERR_DEF_(EBADFD)
KERNEL_ERR_DEF_(EREMCHG)
KERNEL_ERR_DEF_(ELIBACC)
KERNEL_ERR_DEF_(ELIBBAD)
KERNEL_ERR_DEF_(ELIBSCN)
KERNEL_ERR_DEF_(ELIBMAX)
KERNEL_ERR_DEF_(ELIBEXEC)
KERNEL_ERR_DEF_(EILSEQ)
KERNEL_ERR_DEF_(ERESTART)
KERNEL_ERR_DEF_(ESTRPIPE)
KERNEL_ERR_DEF_(EUSERS)
KERNEL_ERR_DEF_(ENOTSOCK)
KERNEL_ERR_DEF_(EDESTADDRREQ)
KERNEL_ERR_DEF_(EMSGSIZE)
KERNEL_ERR_DEF_(EPROTOTYPE)
KERNEL_ERR_DEF_(ENOPROTOOPT)
KERNEL_ERR_DEF_(EPROTONOSUPPORT)
KERNEL_ERR_DEF_(ESOCKTNOSUPPORT)
KERNEL_ERR_DEF_(EOPNOTSUPP)
KERNEL_ERR_DEF_(EPFNOSUPPORT)
KERNEL_ERR_DEF_(EAFNOSUPPORT)
KERNEL_ERR_DEF_(EADDRINUSE)
KERNEL_ERR_DEF_(EADDRNOTAVAIL)
KERNEL_ERR_DEF_(ENETDOWN)
KERNEL_ERR_DEF_(ENETUNREACH)
KERNEL_ERR_DEF_(ENETRESET)
KERNEL_ERR_DEF_(ECONNABORTED)
KERNEL_ERR_DEF_(ECONNRESET)
KERNEL_ERR_DEF_(ENOBUFS)
KERNEL_ERR_DEF_(EISCONN)
KERNEL_ERR_DEF_(ENOTCONN)
KERNEL_ERR_DEF_(ESHUTDOWN)
KERNEL_ERR_DEF_(ETOOMANYREFS)
KERNEL_ERR_DEF_(ETIMEDOUT)
KERNEL_ERR_DEF_(ECONNREFUSED)
KERNEL_ERR_DEF_(EHOSTDOWN)
KERNEL_ERR_DEF_(EHOSTUNREACH)
KERNEL_ERR_DEF_(EALREADY)
KERNEL_ERR_DEF_(EINPROGRESS)
KERNEL_ERR_DEF_(ESTALE)
KERNEL_ERR_DEF_(EUCLEAN)
KERNEL_ERR_DEF_(ENOTNAM)
KERNEL_ERR_DEF_(ENAVAIL)
KERNEL_ERR_DEF_(EISNAM)
KERNEL_ERR_DEF_(EREMOTEIO)
KERNEL_ERR_DEF_(EDQUOT)
KERNEL_ERR_DEF_(ENOMEDIUM)
KERNEL_ERR_DEF_(EMEDIUMTYPE)
KERNEL_ERR_DEF_(ECANCELED)
KERNEL_ERR_DEF_(ENOKEY)
KERNEL_ERR_DEF_(EKEYEXPIRED)
KERNEL_ERR_DEF_(EKEYREVOKED)
KERNEL_ERR_DEF_(EKEYREJECTED)
KERNEL_ERR_DEF_(EOWNERDEAD)
KERNEL_ERR_DEF_(ENOTRECOVERABLE)
KERNEL_ERR_DEF_(ERFKILL)
KERNEL_ERR_DEF_(EHWPOISON)

#define KERNEL_ERR_NUM 133
#define KERNEL_ARR_DEF_(error_name) \
                [error_name] = &FX_##error_name##_
const fx_error_t *const KERNEL_ERR_ARR[KERNEL_ERR_NUM + 1] = {
        KERNEL_ARR_DEF_(EPERM),
        KERNEL_ARR_DEF_(ENOENT),
        KERNEL_ARR_DEF_(ESRCH),
        KERNEL_ARR_DEF_(EINTR),
        KERNEL_ARR_DEF_(EIO),
        KERNEL_ARR_DEF_(ENXIO),
        KERNEL_ARR_DEF_(E2BIG),
        KERNEL_ARR_DEF_(ENOEXEC),
        KERNEL_ARR_DEF_(EBADF),
        KERNEL_ARR_DEF_(ECHILD),
        KERNEL_ARR_DEF_(EAGAIN),
        KERNEL_ARR_DEF_(ENOMEM),
        KERNEL_ARR_DEF_(EACCES),
        KERNEL_ARR_DEF_(EFAULT),
        KERNEL_ARR_DEF_(ENOTBLK),
        KERNEL_ARR_DEF_(EBUSY),
        KERNEL_ARR_DEF_(EEXIST),
        KERNEL_ARR_DEF_(EXDEV),
        KERNEL_ARR_DEF_(ENODEV),
        KERNEL_ARR_DEF_(ENOTDIR),
        KERNEL_ARR_DEF_(EISDIR),
        KERNEL_ARR_DEF_(EINVAL),
        KERNEL_ARR_DEF_(ENFILE),
        KERNEL_ARR_DEF_(EMFILE),
        KERNEL_ARR_DEF_(ENOTTY),
        KERNEL_ARR_DEF_(ETXTBSY),
        KERNEL_ARR_DEF_(EFBIG),
        KERNEL_ARR_DEF_(ENOSPC),
        KERNEL_ARR_DEF_(ESPIPE),
        KERNEL_ARR_DEF_(EROFS),
        KERNEL_ARR_DEF_(EMLINK),
        KERNEL_ARR_DEF_(EPIPE),
        KERNEL_ARR_DEF_(EDOM),
        KERNEL_ARR_DEF_(ERANGE),
        KERNEL_ARR_DEF_(EDEADLK),
        KERNEL_ARR_DEF_(ENAMETOOLONG),
        KERNEL_ARR_DEF_(ENOLCK),
        KERNEL_ARR_DEF_(ENOSYS),
        KERNEL_ARR_DEF_(ENOTEMPTY),
        KERNEL_ARR_DEF_(ELOOP),
        KERNEL_ARR_DEF_(EWOULDBLOCK),
        KERNEL_ARR_DEF_(ENOMSG),
        KERNEL_ARR_DEF_(EIDRM),
        KERNEL_ARR_DEF_(ECHRNG),
        KERNEL_ARR_DEF_(EL2NSYNC),
        KERNEL_ARR_DEF_(EL3HLT),
        KERNEL_ARR_DEF_(EL3RST),
        KERNEL_ARR_DEF_(ELNRNG),
        KERNEL_ARR_DEF_(EUNATCH),
        KERNEL_ARR_DEF_(ENOCSI),
        KERNEL_ARR_DEF_(EL2HLT),
        KERNEL_ARR_DEF_(EBADE),
        KERNEL_ARR_DEF_(EBADR),
        KERNEL_ARR_DEF_(EXFULL),
        KERNEL_ARR_DEF_(ENOANO),
        KERNEL_ARR_DEF_(EBADRQC),
        KERNEL_ARR_DEF_(EBADSLT),
        KERNEL_ARR_DEF_(EDEADLOCK),
        KERNEL_ARR_DEF_(EBFONT),
        KERNEL_ARR_DEF_(ENOSTR),
        KERNEL_ARR_DEF_(ENODATA),
        KERNEL_ARR_DEF_(ETIME),
        KERNEL_ARR_DEF_(ENOSR),
        KERNEL_ARR_DEF_(ENONET),
        KERNEL_ARR_DEF_(ENOPKG),
        KERNEL_ARR_DEF_(EREMOTE),
        KERNEL_ARR_DEF_(ENOLINK),
        KERNEL_ARR_DEF_(EADV),
        KERNEL_ARR_DEF_(ESRMNT),
        KERNEL_ARR_DEF_(ECOMM),
        KERNEL_ARR_DEF_(EPROTO),
        KERNEL_ARR_DEF_(EMULTIHOP),
        KERNEL_ARR_DEF_(EDOTDOT),
        KERNEL_ARR_DEF_(EBADMSG),
        KERNEL_ARR_DEF_(EOVERFLOW),
        KERNEL_ARR_DEF_(ENOTUNIQ),
        KERNEL_ARR_DEF_(EBADFD),
        KERNEL_ARR_DEF_(EREMCHG),
        KERNEL_ARR_DEF_(ELIBACC),
        KERNEL_ARR_DEF_(ELIBBAD),
        KERNEL_ARR_DEF_(ELIBSCN),
        KERNEL_ARR_DEF_(ELIBMAX),
        KERNEL_ARR_DEF_(ELIBEXEC),
        KERNEL_ARR_DEF_(EILSEQ),
        KERNEL_ARR_DEF_(ERESTART),
        KERNEL_ARR_DEF_(ESTRPIPE),
        KERNEL_ARR_DEF_(EUSERS),
        KERNEL_ARR_DEF_(ENOTSOCK),
        KERNEL_ARR_DEF_(EDESTADDRREQ),
        KERNEL_ARR_DEF_(EMSGSIZE),
        KERNEL_ARR_DEF_(EPROTOTYPE),
        KERNEL_ARR_DEF_(ENOPROTOOPT),
        KERNEL_ARR_DEF_(EPROTONOSUPPORT),
        KERNEL_ARR_DEF_(ESOCKTNOSUPPORT),
        KERNEL_ARR_DEF_(EOPNOTSUPP),
        KERNEL_ARR_DEF_(EPFNOSUPPORT),
        KERNEL_ARR_DEF_(EAFNOSUPPORT),
        KERNEL_ARR_DEF_(EADDRINUSE),
        KERNEL_ARR_DEF_(EADDRNOTAVAIL),
        KERNEL_ARR_DEF_(ENETDOWN),
        KERNEL_ARR_DEF_(ENETUNREACH),
        KERNEL_ARR_DEF_(ENETRESET),
        KERNEL_ARR_DEF_(ECONNABORTED),
        KERNEL_ARR_DEF_(ECONNRESET),
        KERNEL_ARR_DEF_(ENOBUFS),
        KERNEL_ARR_DEF_(EISCONN),
        KERNEL_ARR_DEF_(ENOTCONN),
        KERNEL_ARR_DEF_(ESHUTDOWN),
        KERNEL_ARR_DEF_(ETOOMANYREFS),
        KERNEL_ARR_DEF_(ETIMEDOUT),
        KERNEL_ARR_DEF_(ECONNREFUSED),
        KERNEL_ARR_DEF_(EHOSTDOWN),
        KERNEL_ARR_DEF_(EHOSTUNREACH),
        KERNEL_ARR_DEF_(EALREADY),
        KERNEL_ARR_DEF_(EINPROGRESS),
        KERNEL_ARR_DEF_(ESTALE),
        KERNEL_ARR_DEF_(EUCLEAN),
        KERNEL_ARR_DEF_(ENOTNAM),
        KERNEL_ARR_DEF_(ENAVAIL),
        KERNEL_ARR_DEF_(EISNAM),
        KERNEL_ARR_DEF_(EREMOTEIO),
        KERNEL_ARR_DEF_(EDQUOT),
        KERNEL_ARR_DEF_(ENOMEDIUM),
        KERNEL_ARR_DEF_(EMEDIUMTYPE),
        KERNEL_ARR_DEF_(ECANCELED),
        KERNEL_ARR_DEF_(ENOKEY),
        KERNEL_ARR_DEF_(EKEYEXPIRED),
        KERNEL_ARR_DEF_(EKEYREVOKED),
        KERNEL_ARR_DEF_(EKEYREJECTED),
        KERNEL_ARR_DEF_(EOWNERDEAD),
        KERNEL_ARR_DEF_(ENOTRECOVERABLE),
        KERNEL_ARR_DEF_(ERFKILL),
        KERNEL_ARR_DEF_(EHWPOISON)
};

const struct fx_error *fx_error_from_kernel(int code) {
        if (code < 0 || code >= KERNEL_ERR_NUM)
                raise(SIGSEGV);
        return KERNEL_ERR_ARR[code];
}

void fx_error_kraise(int code) {
        fx_error_raise(fx_error_from_kernel(code));
}

